/**=========================================================
 * app.js
 * 初始化程序
 * @author: haili042
 =========================================================*/

// 一个项目只有一个 ng-app
var App = angular.module('app', [
    'ui.router'
]);

// 由于整个应用都会和路由打交道，所以这里把$state和$stateParams这两个对象放到$rootScope上，方便其它地方引用和注入。
// 这里的run方法只会在angular启动的时候运行一次。
App.run(function ($rootScope, $state, $stateParams, $window, $templateCache) {
    $rootScope.$state = $state;
    $rootScope.$stateParams = $stateParams;
});


/**=========================================================
 * config.js
 * 配置路由
 * @author: haili042
 =========================================================*/

App.config(['$stateProvider', '$urlRouterProvider',
    function ($stateProvider, $urlRouterProvider) {
        'use strict';

        // 默认路由
        $urlRouterProvider.otherwise('/');

        // 路由配置
        // 注意这里采用的是ui-router这个路由，而不是ng原生的路由。ng原生的路由不能支持嵌套视图
        $stateProvider
            .state('/', {
                url: '/index',
                title: '首页',
                views: {
                    '': {
                        templateUrl: 'app/tpl/index.html'
                    }

                }
            })

            // 类似 struts 的通配符
            // bss: business 业务文件夹, 与 tpl 下的文件夹名一一对应
            .state('/:bss', {
                // page 与 bss 内的文件名一一对应
                url: '/:bss/:page',
                title: '用户管理',
                templateUrl: function ($routeParams) {
                    // 添加时间戳, 防止缓存
                    return 'app/tpl/' + $routeParams.bss + '/' + $routeParams.page + '.html?_=' + new Date().getTime();
                }
            })
        ;
}]);
/**=========================================================
 * constant.js
 * 定义全局变量, 调用的时候注入即可
 * @author: haili042
 =========================================================*/

App
    // 全局颜色
    .constant('APP_COLORS', {
        'primary':                '#5d9cec',
        'success':                '#27c24c',
        'info':                   '#23b7e5',
        'warning':                '#ff902b',
        'danger':                 '#f05050',
        'inverse':                '#131e26',
        'green':                  '#37bc9b',
        'pink':                   '#f532e5',
        'purple':                 '#7266ba',
        'dark':                   '#3a3f51',
        'yellow':                 '#fad732',
        'gray-darker':            '#232735',
        'gray-dark':              '#3a3f51',
        'gray':                   '#dde6e9',
        'gray-light':             '#e4eaec',
        'gray-lighter':           '#edf1f2'
    })

    // 媒体查询
    .constant('APP_MEDIAQUERY', {
        'desktopLG':             1200,
        'desktop':                992,
        'tablet':                 768,
        'mobile':                 480
    })

    // 定义依赖的模块
    .constant('APP_REQUIRES', {
        // jquery 模块
        // ...

        // angular 模块
        modules: [
        ]

    })
;

